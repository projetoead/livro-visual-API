(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{Jrg7:function(l,n,u){"use strict";u.r(n);var t=u("CcnG"),i=u("mrSG"),e=u("AxkA"),o=u("H+bZ"),s=u("ZZ/e"),r=u("kzlf"),a=function(){function l(l,n,u,t,i,e,o){this.loadingCtrl=l,this.route=n,this.alertCtrl=u,this.toastCtrl=t,this.router=i,this.banco=e,this.api=o,this.slideAtual=1,this.atividade=null,this.listaPontos=[],this.pontoFocal=""}return l.prototype.ionViewDidEnter=function(){var l=this.route.snapshot.paramMap.get("id");this.abrirAtividade(l)},l.prototype.ngOnInit=function(){return i.b(this,void 0,void 0,(function(){var l,n;return i.e(this,(function(u){switch(u.label){case 0:return this.editorView=new r("#editorView",{theme:"snow",modules:{toolbar:l=[[{font:[]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{align:[]}],["clean"]]}}),this.editor=new r("#editorSintese",{theme:"snow",modules:{toolbar:l}}),n=this,[4,this.banco.get("user-credentials")];case 1:return n.usuario=u.sent(),[2]}}))}))},l.prototype.abrirAtividade=function(l){return i.b(this,void 0,void 0,(function(){var n,u;return i.e(this,(function(t){switch(t.label){case 0:return[4,this.loadingCtrl.create({message:"Buscando atividades..."})];case 1:return(n=t.sent()).present(),[4,this.api.get("\n            query {\n                retornarAtividade(id_atividade: "+l+"){\n                    id\n                    titulo\n                    autor\n                    texto\n                    imagens{\n                        imagem{\n                            link\n                        }\n                    }\n                }\n            }\n        ")];case 2:return u=t.sent(),n.dismiss(),!u.errors&&u.data.retornarAtividade&&(this.atividade=u.data.retornarAtividade,this.processarDados()),[2]}}))}))},l.prototype.processarDados=function(){console.log("Texto: ",JSON.parse(this.atividade.texto)),this.editorView.setContents(JSON.parse(this.atividade.texto)),document.getElementById("textoView").innerHTML=this.editorView.root.innerHTML},l.prototype.avancar=function(){this.slideAtual++},l.prototype.voltar=function(){this.slideAtual--},l.prototype.adicionarPonto=function(){this.listaPontos.push(JSON.parse(JSON.stringify(this.pontoFocal))),this.pontoFocal=""},l.prototype.concluir=function(){return i.b(this,void 0,void 0,(function(){var l,n,u;return i.e(this,(function(t){switch(t.label){case 0:return[4,this.loadingCtrl.create({message:"Salvando..."})];case 1:return(l=t.sent()).present(),n="\n            mutation {\n                novaResposta(\n                    id_usuario: "+this.usuario.id+"\n                    id_atividade: "+this.atividade.id+"\n                    sintese: "+JSON.stringify(JSON.stringify(this.editor.getContents()))+"\n                    frases: "+JSON.stringify(JSON.stringify(this.listaPontos))+"\n                ){\n                    id\n                }\n            }\n        ",[4,this.api.post({query:n})];case 2:return u=t.sent(),l.dismiss(),!u.data||u.errors?[3,4]:[4,this.toastCtrl.create({message:"Resposta cadastrada com sucesso",duration:3e3})];case 3:return t.sent().present(),this.router.navigate(["/atividades/minhas-atividades"]),[3,6];case 4:return[4,this.alertCtrl.create({header:"Ocorreu um erro",message:"Tente novamente, ou contate o suporte."})];case 5:t.sent().present(),t.label=6;case 6:return[2]}}))}))},l}(),b=function(){return function(){}}(),d=u("pMnS"),c=u("oBZk"),h=u("Ip0R"),p=u("gIcY"),g=u("ZYCi"),v=t.rb({encapsulation:0,styles:[[".conteudo[_ngcontent-%COMP%]{padding:0 25px}"]],data:{}});function k(l){return t.Kb(0,[(l()(),t.tb(0,0,null,null,4,"ion-item",[],null,null,null,c.T,c.q)),t.sb(1,49152,null,0,s.F,[t.h,t.k,t.z],null,null),(l()(),t.tb(2,0,null,0,2,"ion-label",[],null,null,null,c.U,c.r)),t.sb(3,49152,null,0,s.L,[t.h,t.k,t.z],null,null),(l()(),t.Jb(4,0,["",""]))],null,(function(l,n){l(n,4,0,n.context.index+1+" - "+n.context.$implicit)}))}function m(l){return t.Kb(0,[(l()(),t.tb(0,0,null,null,3,"ion-col",[["size","6"]],null,null,null,c.M,c.j)),t.sb(1,49152,null,0,s.r,[t.h,t.k,t.z],{size:[0,"size"]},null),(l()(),t.tb(2,0,null,0,1,"div",[["class","imagens"]],null,null,null,null,null)),(l()(),t.tb(3,0,null,null,0,"img",[["class","imagem"]],[[8,"src",4]],null,null,null,null))],(function(l,n){l(n,1,0,"6")}),(function(l,n){l(n,3,0,n.context.$implicit.imagem.link)}))}function f(l){return t.Kb(0,[(l()(),t.tb(0,0,null,null,5,"ion-row",[],null,null,null,c.ab,c.x)),t.sb(1,49152,null,0,s.hb,[t.h,t.k,t.z],null,null),(l()(),t.ib(16777216,null,0,1,null,m)),t.sb(3,278528,null,0,h.h,[t.O,t.L,t.s],{ngForOf:[0,"ngForOf"]},null),(l()(),t.tb(4,0,null,0,1,"ion-col",[["size","12"]],null,null,null,c.M,c.j)),t.sb(5,49152,null,0,s.r,[t.h,t.k,t.z],{size:[0,"size"]},null)],(function(l,n){l(n,3,0,n.component.atividade.imagens),l(n,5,0,"12")}),null)}function z(l){return t.Kb(0,[(l()(),t.tb(0,0,null,null,10,"ion-header",[],null,null,null,c.Q,c.n)),t.sb(1,49152,null,0,s.z,[t.h,t.k,t.z],null,null),(l()(),t.tb(2,0,null,0,8,"ion-toolbar",[],null,null,null,c.fb,c.C)),t.sb(3,49152,null,0,s.Ab,[t.h,t.k,t.z],null,null),(l()(),t.tb(4,0,null,0,3,"ion-buttons",[["slot","start"]],null,null,null,c.G,c.d)),t.sb(5,49152,null,0,s.j,[t.h,t.k,t.z],null,null),(l()(),t.tb(6,0,null,0,1,"ion-menu-button",[],null,null,null,c.X,c.v)),t.sb(7,49152,null,0,s.P,[t.h,t.k,t.z],null,null),(l()(),t.tb(8,0,null,0,2,"ion-title",[],null,null,null,c.eb,c.B)),t.sb(9,49152,null,0,s.yb,[t.h,t.k,t.z],null,null),(l()(),t.Jb(-1,0,["Responder Atividade"])),(l()(),t.tb(11,0,null,null,74,"ion-content",[],null,null,null,c.N,c.k)),t.sb(12,49152,null,0,s.s,[t.h,t.k,t.z],null,null),(l()(),t.tb(13,0,null,0,72,"div",[["class","conteudo"]],null,null,null,null,null)),(l()(),t.tb(14,0,null,null,71,"div",[["class","slide-um"]],null,null,null,null,null)),(l()(),t.tb(15,0,null,null,7,"div",[],[[8,"hidden",0]],null,null,null,null)),(l()(),t.tb(16,0,null,null,3,"ion-text",[["color","dark"]],null,null,null,c.cb,c.z)),t.sb(17,49152,null,0,s.vb,[t.h,t.k,t.z],{color:[0,"color"]},null),(l()(),t.tb(18,0,null,0,1,"h1",[],null,null,null,null,null)),(l()(),t.Jb(-1,null,["Livro de Registro Visual"])),(l()(),t.tb(20,0,null,null,2,"ion-button",[],null,[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.avancar()&&t),t}),c.F,c.c)),t.sb(21,49152,null,0,s.i,[t.h,t.k,t.z],null,null),(l()(),t.Jb(-1,0,[" Iniciar "])),(l()(),t.tb(23,0,null,null,47,"div",[],[[8,"hidden",0]],null,null,null,null)),(l()(),t.tb(24,0,null,null,46,"ion-grid",[],null,null,null,c.P,c.m)),t.sb(25,49152,null,0,s.y,[t.h,t.k,t.z],null,null),(l()(),t.tb(26,0,null,0,44,"ion-row",[],null,null,null,c.ab,c.x)),t.sb(27,49152,null,0,s.hb,[t.h,t.k,t.z],null,null),(l()(),t.tb(28,0,null,0,10,"ion-col",[["size-lg","6"],["size-sm","12"]],null,null,null,c.M,c.j)),t.sb(29,49152,null,0,s.r,[t.h,t.k,t.z],null,null),(l()(),t.tb(30,0,null,0,5,"ion-text",[["color","dark"]],null,null,null,c.cb,c.z)),t.sb(31,49152,null,0,s.vb,[t.h,t.k,t.z],{color:[0,"color"]},null),(l()(),t.tb(32,0,null,0,1,"h1",[],null,null,null,null,null)),(l()(),t.Jb(33,null,["",""])),(l()(),t.tb(34,0,null,0,1,"h3",[],null,null,null,null,null)),(l()(),t.Jb(35,null,["",""])),(l()(),t.tb(36,0,[["textoView",1]],0,0,"div",[["id","textoView"]],null,null,null,null,null)),(l()(),t.tb(37,0,null,0,1,"div",[["hidden",""]],null,null,null,null,null)),(l()(),t.tb(38,0,[["editorView",1]],null,0,"div",[["id","editorView"]],null,null,null,null,null)),(l()(),t.tb(39,0,null,0,31,"ion-col",[["size-lg","6"],["size-sm","12"]],null,null,null,c.M,c.j)),t.sb(40,49152,null,0,s.r,[t.h,t.k,t.z],null,null),(l()(),t.tb(41,0,null,0,3,"ion-text",[["class","ion-text-center"],["color","dark"]],null,null,null,c.cb,c.z)),t.sb(42,49152,null,0,s.vb,[t.h,t.k,t.z],{color:[0,"color"]},null),(l()(),t.tb(43,0,null,0,1,"h1",[],null,null,null,null,null)),(l()(),t.Jb(-1,null,["Pontos Focais"])),(l()(),t.tb(45,0,null,0,3,"ion-list",[],null,null,null,c.W,c.s)),t.sb(46,49152,null,0,s.M,[t.h,t.k,t.z],null,null),(l()(),t.ib(16777216,null,0,1,null,k)),t.sb(48,278528,null,0,h.h,[t.O,t.L,t.s],{ngForOf:[0,"ngForOf"]},null),(l()(),t.tb(49,0,null,0,11,"ion-item",[],null,null,null,c.T,c.q)),t.sb(50,49152,null,0,s.F,[t.h,t.k,t.z],null,null),(l()(),t.tb(51,0,null,0,2,"ion-label",[["position","floating"]],null,null,null,c.U,c.r)),t.sb(52,49152,null,0,s.L,[t.h,t.k,t.z],{position:[0,"position"]},null),(l()(),t.Jb(-1,0,["Novo Ponto Focal"])),(l()(),t.tb(54,0,null,0,6,"ion-input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(l,n,u){var i=!0,e=l.component;return"ionBlur"===n&&(i=!1!==t.Eb(l,55)._handleBlurEvent(u.target)&&i),"ionChange"===n&&(i=!1!==t.Eb(l,55)._handleInputEvent(u.target)&&i),"ngModelChange"===n&&(i=!1!==(e.pontoFocal=u)&&i),i}),c.S,c.p)),t.sb(55,16384,null,0,s.Kb,[t.k],null,null),t.Gb(1024,null,p.g,(function(l){return[l]}),[s.Kb]),t.sb(57,671744,null,0,p.k,[[8,null],[8,null],[8,null],[6,p.g]],{model:[0,"model"]},{update:"ngModelChange"}),t.Gb(2048,null,p.h,null,[p.k]),t.sb(59,16384,null,0,p.i,[[4,p.h]],null,null),t.sb(60,49152,null,0,s.E,[t.h,t.k,t.z],{type:[0,"type"]},null),(l()(),t.tb(61,0,null,0,4,"ion-button",[],null,[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.adicionarPonto()&&t),t}),c.F,c.c)),t.sb(62,49152,null,0,s.i,[t.h,t.k,t.z],{disabled:[0,"disabled"]},null),(l()(),t.tb(63,0,null,0,1,"ion-icon",[["name","add"],["slot","start"]],null,null,null,c.R,c.o)),t.sb(64,49152,null,0,s.A,[t.h,t.k,t.z],{name:[0,"name"]},null),(l()(),t.Jb(-1,0,[" Adicionar "])),(l()(),t.tb(66,0,null,0,4,"ion-button",[],null,[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.avancar()&&t),t}),c.F,c.c)),t.sb(67,49152,null,0,s.i,[t.h,t.k,t.z],{disabled:[0,"disabled"]},null),(l()(),t.tb(68,0,null,0,1,"ion-icon",[["name","arrow-forward"]],null,null,null,c.R,c.o)),t.sb(69,49152,null,0,s.A,[t.h,t.k,t.z],{name:[0,"name"]},null),(l()(),t.Jb(-1,0,[" Avan\xe7ar "])),(l()(),t.tb(71,0,null,null,14,"div",[],[[8,"hidden",0]],null,null,null,null)),(l()(),t.tb(72,0,null,null,13,"ion-grid",[],null,null,null,c.P,c.m)),t.sb(73,49152,null,0,s.y,[t.h,t.k,t.z],null,null),(l()(),t.tb(74,0,null,0,11,"ion-row",[],null,null,null,c.ab,c.x)),t.sb(75,49152,null,0,s.hb,[t.h,t.k,t.z],null,null),(l()(),t.tb(76,0,null,0,3,"ion-col",[["size","6"]],null,null,null,c.M,c.j)),t.sb(77,49152,null,0,s.r,[t.h,t.k,t.z],{size:[0,"size"]},null),(l()(),t.ib(16777216,null,0,1,null,f)),t.sb(79,16384,null,0,h.i,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.tb(80,0,null,0,5,"ion-col",[["size","6"]],null,null,null,c.M,c.j)),t.sb(81,49152,null,0,s.r,[t.h,t.k,t.z],{size:[0,"size"]},null),(l()(),t.tb(82,0,[["editorSintese",1]],0,0,"div",[["id","editorSintese"]],null,null,null,null,null)),(l()(),t.tb(83,0,null,0,2,"ion-button",[["color","success"]],null,[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.concluir()&&t),t}),c.F,c.c)),t.sb(84,49152,null,0,s.i,[t.h,t.k,t.z],{color:[0,"color"]},null),(l()(),t.Jb(-1,0,[" Concluir "]))],(function(l,n){var u=n.component;l(n,17,0,"dark"),l(n,31,0,"dark"),l(n,42,0,"dark"),l(n,48,0,u.listaPontos),l(n,52,0,"floating"),l(n,57,0,u.pontoFocal),l(n,60,0,"text"),l(n,62,0,!u.pontoFocal),l(n,64,0,"add"),l(n,67,0,u.listaPontos.length<5),l(n,69,0,"arrow-forward"),l(n,77,0,"6"),l(n,79,0,u.atividade),l(n,81,0,"6"),l(n,84,0,"success")}),(function(l,n){var u=n.component;l(n,15,0,1!=u.slideAtual),l(n,23,0,2!=u.slideAtual),l(n,33,0,u.atividade?u.atividade.titulo:"Sem Titulo"),l(n,35,0,u.atividade?u.atividade.autor:"Sem Autor"),l(n,54,0,t.Eb(n,59).ngClassUntouched,t.Eb(n,59).ngClassTouched,t.Eb(n,59).ngClassPristine,t.Eb(n,59).ngClassDirty,t.Eb(n,59).ngClassValid,t.Eb(n,59).ngClassInvalid,t.Eb(n,59).ngClassPending),l(n,71,0,3!=u.slideAtual)}))}function C(l){return t.Kb(0,[(l()(),t.tb(0,0,null,null,1,"app-responder-atividade",[],null,null,null,z,v)),t.sb(1,114688,null,0,a,[s.Eb,g.a,s.a,s.Lb,g.m,e.a,o.a],null,null)],(function(l,n){l(n,1,0)}),null)}var w=t.pb("app-responder-atividade",a,C,{},{},[]);u.d(n,"ResponderAtividadePageModuleNgFactory",(function(){return y}));var y=t.qb(b,[],(function(l){return t.Bb([t.Cb(512,t.j,t.bb,[[8,[d.a,w]],[3,t.j],t.x]),t.Cb(4608,h.k,h.j,[t.u,[2,h.q]]),t.Cb(4608,p.p,p.p,[]),t.Cb(4608,s.b,s.b,[t.z,t.g]),t.Cb(4608,s.Fb,s.Fb,[s.b,t.j,t.q]),t.Cb(4608,s.Ib,s.Ib,[s.b,t.j,t.q]),t.Cb(1073742336,h.b,h.b,[]),t.Cb(1073742336,p.o,p.o,[]),t.Cb(1073742336,p.e,p.e,[]),t.Cb(1073742336,s.Cb,s.Cb,[]),t.Cb(1073742336,g.o,g.o,[[2,g.t],[2,g.m]]),t.Cb(1073742336,b,b,[]),t.Cb(1024,g.k,(function(){return[[{path:"",component:a}]]}),[])])}))}}]);